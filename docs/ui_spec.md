# Gematria CipherLab — 画面仕様書

## 1. 画面構成
```
┌─────────────────────────────────────┐
│  ヘッダー（ツール名 + 言語切替）     │
├─────────────────────────────────────┤
│  タブバー: [Simple] [Agrippa]       │
├─────────────────────────────────────┤
│  方式選択（ドロップダウン + ⓘ）     │
├─────────────────────────────────────┤
│  入力エリア + プリセット選択         │
├─────────────────────────────────────┤
│  警告セクション（条件付き表示）      │
├─────────────────────────────────────┤
│  結果表示（3ステップトレース）       │
├─────────────────────────────────────┤
│  参照テーブル                        │
├─────────────────────────────────────┤
│  フッター（GitHubリンク）            │
└─────────────────────────────────────┘
```

## 2. ヘッダー
- ツール名: Gematria CipherLab
- 概要説明文（多言語対応）
- **言語切替トグル**: EN / JA ボタン
  - 右上に配置
  - 現在の言語をハイライト表示
  - クリックで即時切替
  - 設定は localStorage に保存

## 3. タブバー
| タブ | 含まれる方式 |
|------|-------------|
| Simple | Simple English A=0, Simple English A=1, Simple Latin23 |
| Agrippa | Agrippa 23, Agrippa 27 |

## 4. 方式選択UI
- 各タブ内にドロップダウンセレクト
- **Simpleタブ**:
  - Simple English A=0（デフォルト）
  - Simple English A=1
  - Simple Latin23
- **Agrippaタブ**:
  - Agrippa 23（デフォルト）
  - Agrippa 27
- ⓘ ボタン: クリックでモーダル表示（方式の詳細説明）

## 5. 入力エリア
- 複数行テキストエリア（3行、最大10,000文字）
- プリセット選択ドロップダウン（方式別に3例）
- 「計算」ボタン

## 6. 結果表示（トレース）

### Step 1: Tokenization（トークン化）
- トークンを個別のチップとして表示
- 状態別スタイル:
  | 状態 | 背景色 | 追加スタイル |
  |------|--------|-------------|
  | Included | 緑系 (#d4edda) | - |
  | Excluded | 赤系 (#f8d7da) | 取消線 |
  | Normalized | 黄系 (#fff3cd) | 元→変換後 表記 |
- 凡例を下部に表示

### Step 2: Mapping（数値割当）
- トークンごとにカード表示
- 構成: トークン → 数値
- 状態に応じた背景色

### Step 3: Summation（合計計算）
- 計算式を横スクロール可能な形式で表示
  - 例: `H(8) + E(5) + L(12) + L(12) + O(15) = 52`
- 合計値を大きく強調表示
- 除外トークンがある場合は別途一覧表示

## 7. 警告表示
- 未定義トークン検出時に表示
- 黄色系背景のアラートボックス
- リスト形式で警告内容を列挙

## 8. 参照テーブル
- 現在の方式のトークン→数値対応表
- 計算で使用されたトークンをハイライト
- 除外文字・正規化情報を注記表示

## 9. モーダル（情報表示）
- ⓘ ボタンクリックで表示
- 方式の詳細説明（多言語対応）
- 閉じるボタンで非表示

## 10. レスポンシブ対応

### モバイル（~599px）
- 単一カラムレイアウト
- 計算ボタンは全幅
- タブは均等幅

### タブレット（600px~899px）
- 計算ボタンは自動幅
- フォントサイズ拡大

### デスクトップ（900px~）
- 入力エリアをグリッドレイアウト
- テキストエリアと計算ボタンを横並び

## 11. アクセシビリティ
- タブに `role="tablist"`, `role="tab"` 設定
- `aria-selected` でタブ状態を明示
- モーダルは `<dialog>` 要素を使用
- ボタンに `aria-label` 設定

## 12. 実装状況
✅ 実装完了
